"use strict";(self.webpackJsonp=self.webpackJsonp||[]).push([[5317],{"5317":function(A){A.exports=JSON.parse('{"version":3,"names":["formatTime","time","sec","Math","round","min","concat","calcDist","x","y","sqrt","pow","normalizeNumber","number","max","scene","screenFn","val","fnMap","defaultIOSMap","i","l","length","ret","document","isHls","url","test","VideoControl","this","visible","isDraggingProgressBall","percentage","progressDimensions","left","width","calcPercentage","pageX","pos","_this","onDragProgressBallStart","hideControlsTimer","clearTimeout","onClickProgress","e","stopPropagation","seekFunc","duration","toggleVisibility","class_1","prototype","onDocumentTouchMove","touchX","touches","setProgressBall","setCurrentTime","onDocumentTouchEnd","progressBallRef","style","nextVisible","undefined","isPlaying","setTimeout","el","visibility","getIsDraggingProgressBall","currentTimeRef","innerHTML","render","_c","controls","currentTime","pauseFunc","playFunc","showPlayBtn","showProgress","formattedDuration","playBtn","h","class","onClick","Host","ref","dom","rect","getBoundingClientRect","onTouchStart","indexCss","Video","isDraggingProgress","gestureType","analyzeGesture","obj","type","nowX","screenX","nowY","screenY","distX","lastTouchScreenX","distY","lastTouchScreenY","enableVslideGesture","isFullScreen","vslideGestureInFullscreen","vslideGesture","dist","abs","lastVolume","videoRef","volume","enableProgressGesture","lastPercentage","_a","_duration","dataX","dataY","loadNativePlayer","src","_b","load","call","init","import","then","n","Hls","default","HLS","isSupported","hls","destroy","loadSource","attachMedia","on","Events","MANIFEST_PARSED","autoplay","play","ERROR","_","data","handleError","canPlayType","console","error","handlePlay","isFirst","controlsRef","onPlay","emit","handlePause","onPause","handleEnded","pause","onEnded","handleTimeUpdate","throttle","__awaiter","isControlDragging","sent","danmuRef","tick","onTimeUpdate","target","seek","ErrorTypes","NETWORK_ERROR","onError","errMsg","response","startLoad","MEDIA_ERROR","reason","recoverMediaError","message","handleDurationChange","handleProgress","onProgress","handleLoadedMetaData","onLoadedMetaData","videoWidth","height","videoHeight","_play","_pause","_stop","_seek","position","onTouchStartContainer","onClickContainer","enablePlayGesture","now","Date","lastClickedTime","onClickFullScreenBtn","toggleFullScreen","handleFullScreenChange","timestamp","getTime","detail","fullscreenElement","fullScreenTimestamp","onFullScreenChange","fullScreen","direction","requestFullscreen","navigationUI","toggleMute","muted","isMute","toggleDanmu","_enableDanmu","class_2","componentWillLoad","enableDanmu","componentDidLoad","initialTime","sendDanmu","danmuList","addEventListener","fullscreenchange","componentDidRender","disconnectedCallback","removeEventListener","watchEnableDanmu","newVal","watchSrc","gestureObj","toastVolumeRef","nextVolume","toastVolumeBarRef","nextPercentage","toastProgressTitleRef","toastProgressRef","getHlsObject","stop","requestFullScreen","exitFullScreen","loop","poster","objectFit","showCenterPlayBtn","showMuteBtn","danmuBtn","showFullscreenBtn","nativeProps","durationTime","classNames","Object","assign","playsinline","onDurationChange","enable","Array","fill","map","VideoDanmu","list","danmuElList","class_3","ensureProperties","danmu","clonedDanmu","key","random","bottom","isArray","__spreadArray","newDanmuList","filter","shouldUpdate","oldDanmuList","some","every","componentDidUpdate","requestAnimationFrame","splice","forEach","webkitTransform","transform","text","color","push"],"sources":["src/components/video/utils.ts","src/components/video/video-control.tsx","src/components/video/style/index.scss?tag=taro-video-core","src/components/video/video.tsx","src/components/video/video-danmu.tsx"],"sourcesContent":["export const formatTime = (time?: number): string => {\\r\\n  if (!time) return \'\'\\r\\n  const sec = Math.round(time % 60)\\r\\n  const min = Math.round((time - sec) / 60)\\r\\n  return `${min < 10 ? `0${min}` : min}:${sec < 10 ? `0${sec}` : sec}`\\r\\n}\\r\\n\\r\\nexport const calcDist = (x: number, y: number): number => {\\r\\n  return Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2))\\r\\n}\\r\\n\\r\\nexport const normalizeNumber = (number: number): number => {\\r\\n  return Math.max(-1, Math.min(number, 1))\\r\\n}\\r\\n\\r\\nexport let scene = \'default\'\\r\\n\\r\\nexport const screenFn = (function () {\\r\\n  let val\\r\\n  const fnMap = [\\r\\n    [\\r\\n      \'requestFullscreen\',\\r\\n      \'exitFullscreen\',\\r\\n      \'fullscreenElement\',\\r\\n      \'fullscreenEnabled\',\\r\\n      \'fullscreenchange\',\\r\\n      \'fullscreenerror\'\\r\\n    ],\\r\\n    // New WebKit\\r\\n    [\\r\\n      \'webkitRequestFullscreen\',\\r\\n      \'webkitExitFullscreen\',\\r\\n      \'webkitFullscreenElement\',\\r\\n      \'webkitFullscreenEnabled\',\\r\\n      \'webkitfullscreenchange\',\\r\\n      \'webkitfullscreenerror\'\\r\\n    ],\\r\\n    // Old WebKit\\r\\n    [\\r\\n      \'webkitRequestFullScreen\',\\r\\n      \'webkitCancelFullScreen\',\\r\\n      \'webkitCurrentFullScreenElement\',\\r\\n      \'webkitCancelFullScreen\',\\r\\n      \'webkitfullscreenchange\',\\r\\n      \'webkitfullscreenerror\'\\r\\n    ],\\r\\n    [\\r\\n      \'mozRequestFullScreen\',\\r\\n      \'mozCancelFullScreen\',\\r\\n      \'mozFullScreenElement\',\\r\\n      \'mozFullScreenEnabled\',\\r\\n      \'mozfullscreenchange\',\\r\\n      \'mozfullscreenerror\'\\r\\n    ],\\r\\n    [\\r\\n      \'msRequestFullscreen\',\\r\\n      \'msExitFullscreen\',\\r\\n      \'msFullscreenElement\',\\r\\n      \'msFullscreenEnabled\',\\r\\n      \'MSFullscreenChange\',\\r\\n      \'MSFullscreenError\'\\r\\n    ]\\r\\n  ]\\r\\n  var defaultIOSMap = [\\r\\n    \'webkitEnterFullscreen\',\\r\\n    \'webkitExitFullscreen\',\\r\\n    \'webkitCurrentFullScreenElement\',\\r\\n    \'webkitSupportsFullscreen\',\\r\\n    \'fullscreenchange\',\\r\\n    \'fullscreenerror\'\\r\\n  ]\\r\\n  let i = 0\\r\\n  const l = fnMap.length\\r\\n  const ret: Record<string, any> = {}\\r\\n  // This for loop essentially checks the current document object for the property/methods above.\\r\\n  for (; i < l; i++) {\\r\\n    val = fnMap[i]\\r\\n    if (val && val[1] in document) {\\r\\n      for (i = 0; i < val.length; i++) {\\r\\n        ret[fnMap[0][i]] = val[i]\\r\\n      }\\r\\n      return ret\\r\\n    }\\r\\n  }\\r\\n  if (!ret[fnMap[0][0]]) {\\r\\n    scene = \'iOS\'\\r\\n    // when there is no any APIs be set.\\r\\n\\r\\n    // In IOS, there is no \'webkitEnterFullscreen\' property `in document` but video can use it for fullscreen.\\r\\n    // ref: https://developer.apple.com/documentation/webkitjs/htmlvideoelement/1633500-webkitenterfullscreen\\r\\n    for (i = 0; i < defaultIOSMap.length; i++) {\\r\\n      ret[fnMap[0][i]] = defaultIOSMap[i]\\r\\n    }\\r\\n  }\\r\\n  // If it doesn\'t find any of them, this whole function returns {}\\r\\n  // and the fn variable is set to this returned value.\\r\\n  return ret\\r\\n})()\\r\\n\\r\\nexport const isHls = url => /\\\\.(m3u8)($|\\\\?)/i.test(url)\\r\\n","import { Component, h, ComponentInterface, Prop, Host, Element, Listen, Method } from \'@stencil/core\'\\nimport { formatTime } from \'./utils\'\\n\\n@Component({\\n  tag: \'taro-video-control\'\\n})\\nexport class VideoControl implements ComponentInterface {\\n  private currentTimeRef: HTMLDivElement\\n  private progressBallRef: HTMLDivElement\\n  private visible = false\\n  private isDraggingProgressBall = false\\n  private hideControlsTimer: ReturnType<typeof setTimeout>\\n  private percentage = 0\\n  private progressDimensions = {\\n    left: 0,\\n    width: 0\\n  }\\n\\n  @Element() el: HTMLElement\\n\\n  @Prop() controls: boolean\\n  @Prop() currentTime: number\\n  @Prop() duration: number\\n  @Prop() isPlaying: boolean\\n  @Prop() pauseFunc: () => void\\n  @Prop() playFunc: () => void\\n  @Prop() seekFunc: (position: number) => void\\n  @Prop() showPlayBtn: boolean\\n  @Prop() showProgress: boolean\\n\\n  @Listen(\'touchmove\', {\\n    target: \'document\'\\n  })\\n  onDocumentTouchMove (e: TouchEvent) {\\n    if (!this.isDraggingProgressBall) return\\n    const touchX = e.touches[0].pageX\\n    this.percentage = this.calcPercentage(touchX)\\n    this.setProgressBall(this.percentage)\\n    this.setCurrentTime(this.percentage * this.duration)\\n  }\\n\\n  @Listen(\'touchend\', {\\n    target: \'document\'\\n  })\\n  @Listen(\'touchcancel\', {\\n    target: \'document\'\\n  })\\n  onDocumentTouchEnd () {\\n    if (!this.isDraggingProgressBall) return\\n\\n    this.isDraggingProgressBall = false\\n    this.seekFunc(this.percentage * this.duration)\\n    this.toggleVisibility(true)\\n  }\\n\\n  @Method()\\n  async setProgressBall (percentage: number) {\\n    if (this.progressBallRef) {\\n      this.progressBallRef.style.left = `${percentage * 100}%`\\n    }\\n  }\\n\\n  @Method()\\n  async toggleVisibility (nextVisible?: boolean) {\\n    const visible = nextVisible === undefined ? !this.visible : nextVisible\\n    if (visible) {\\n      this.hideControlsTimer && clearTimeout(this.hideControlsTimer)\\n      if (this.isPlaying) {\\n        this.hideControlsTimer = setTimeout(() => {\\n          this.toggleVisibility(false)\\n        }, 2000)\\n      }\\n      this.el.style.visibility = \'visible\'\\n    } else {\\n      this.el.style.visibility = \'hidden\'\\n    }\\n    this.visible = !!visible\\n  }\\n\\n  @Method()\\n  async getIsDraggingProgressBall () {\\n    return this.isDraggingProgressBall\\n  }\\n\\n  @Method()\\n  async setCurrentTime (time: number) {\\n    this.currentTimeRef.innerHTML = formatTime(time)\\n  }\\n\\n  calcPercentage = (pageX: number): number => {\\n    let pos = pageX - this.progressDimensions.left\\n    pos = Math.max(pos, 0)\\n    pos = Math.min(pos, this.progressDimensions.width)\\n    return pos / this.progressDimensions.width\\n  }\\n\\n  onDragProgressBallStart = () => {\\n    this.isDraggingProgressBall = true\\n    this.hideControlsTimer && clearTimeout(this.hideControlsTimer)\\n  }\\n\\n  onClickProgress = (e: MouseEvent) => {\\n    e.stopPropagation()\\n\\n    const percentage = this.calcPercentage(e.pageX)\\n    this.seekFunc(percentage * this.duration)\\n    this.toggleVisibility(true)\\n  }\\n\\n  render () {\\n    const {\\n      controls,\\n      currentTime,\\n      duration,\\n      isPlaying,\\n      pauseFunc,\\n      playFunc,\\n      showPlayBtn,\\n      showProgress\\n    } = this\\n\\n    const formattedDuration = formatTime(duration)\\n    let playBtn\\n\\n    if (!showPlayBtn) {\\n      playBtn = null\\n    } else if (isPlaying) {\\n      playBtn = <div class=\'taro-video-control-button taro-video-control-button-pause\' onClick={pauseFunc} />\\n    } else {\\n      playBtn = <div class=\'taro-video-control-button taro-video-control-button-play\' onClick={playFunc} />\\n    }\\n\\n    return (\\n      <Host class=\'taro-video-bar taro-video-bar-full\'>\\n        {controls && (\\n          <div class=\'taro-video-controls\'>\\n            {playBtn}\\n            {showProgress && (\\n              <div class=\'taro-video-current-time\' ref={dom => (this.currentTimeRef = dom as HTMLDivElement)}>\\n                {formatTime(currentTime)}\\n              </div>\\n            )}\\n            {showProgress && (\\n              <div class=\'taro-video-progress-container\' onClick={this.onClickProgress}>\\n                <div\\n                  class=\'taro-video-progress\'\\n                  ref={ref => {\\n                    if (!ref) return\\n                    const rect = ref.getBoundingClientRect()\\n                    this.progressDimensions.left = rect.left\\n                    this.progressDimensions.width = rect.width\\n                  }}>\\n                  <div class=\'taro-video-progress-buffered\' style={{ width: \'100%\' }} />\\n                  <div\\n                    class=\'taro-video-ball\'\\n                    ref={dom => (this.progressBallRef = dom as HTMLDivElement)}\\n                    onTouchStart={this.onDragProgressBallStart}\\n                    style={{\\n                      left: `${formattedDuration ? (this.currentTime / duration) * 100 : 0}%`\\n                    }}\\n                  >\\n                    <div class=\'taro-video-inner\' />\\n                  </div>\\n                </div>\\n              </div>\\n            )}\\n            {showProgress && <div class=\'taro-video-duration\'>{formattedDuration}</div>}\\n          </div>\\n        )}\\n        <slot />\\n      </Host>\\n    )\\n  }\\n}\\n","@charset \\"UTF-8\\";\\n\\n.taro-video {\\n  display: inline-block;\\n  overflow: hidden;\\n  position: relative;\\n  width: 100%;\\n  height: 225px;\\n  line-height: 0;\\n}\\n\\n.taro-video[hidden] {\\n  display: none;\\n}\\n\\n.taro-video-container {\\n  display: inline-block;\\n\\n  // NOTE: video 元素父节点设置该属性会导致 iOS 元素层级问题 https://stackoverflow.com/questions/49653475/video-and-z-index-inside-scaled-element-some-divs-disappear\\n  // overflow: hidden;\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n  width: 100%;\\n  height: 100%;\\n  background-color: #000;\\n  object-position: inherit;\\n}\\n\\n.taro-video-container.taro-video-type-fullscreen {\\n  position: fixed;\\n  left: 0;\\n  right: 0;\\n  top: 0;\\n  bottom: 0;\\n  z-index: 999;\\n}\\n\\n.taro-video-container.taro-video-type-fullscreen.taro-video-type-rotate-left {\\n  transform: translate(-50%, -50%) rotate(-90deg);\\n}\\n\\n.taro-video-container.taro-video-type-fullscreen.taro-video-type-rotate-right {\\n  transform: translate(-50%, -50%) rotate(90deg);\\n}\\n\\n.taro-video-video {\\n  width: 100%;\\n  height: 100%;\\n  object-position: inherit;\\n}\\n\\n.taro-video-cover {\\n  display: flex;\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n  bottom: 0;\\n  z-index: 1;\\n  flex-direction: column;\\n  justify-content: center;\\n  align-items: center;\\n  width: 100%;\\n  background-color: rgb(1 1 1 / 50%);\\n  -webkit-box-orient: vertical;\\n  -webkit-box-direction: normal;\\n  -webkit-box-pack: center;\\n  -webkit-box-align: center;\\n}\\n\\n.taro-video-cover-play-button {\\n  width: 40px;\\n  height: 40px;\\n  background-repeat: no-repeat;\\n  background-position: 50% 50%;\\n  background-size: 50%;\\n}\\n\\n.taro-video-cover-duration {\\n  margin-top: 10px;\\n  line-height: 1;\\n  font-size: 16px;\\n  color: #fff;\\n}\\n\\n.taro-video-bar {\\n  display: flex;\\n  visibility: hidden;\\n  overflow: hidden;\\n  position: absolute;\\n  right: 0;\\n  bottom: 0;\\n  z-index: 1;\\n  align-items: center;\\n  padding: 0 10px;\\n  height: 44px;\\n  background-color: rgb(0 0 0 / 50%);\\n  -webkit-box-align: center;\\n}\\n\\n.taro-video-bar.taro-video-bar-full {\\n  left: 0;\\n}\\n\\n.taro-video-controls {\\n  display: flex;\\n  -webkit-box-flex: 1;\\n  flex-grow: 1;\\n  margin: 0 8.5px;\\n}\\n\\n.taro-video-control-button {\\n  box-sizing: content-box;\\n  margin-left: -8.5px;\\n  padding: 14.5px 12.5px;\\n  width: 13px;\\n  height: 15px;\\n}\\n\\n.taro-video-control-button::after {\\n  display: block;\\n  width: 100%;\\n  height: 100%;\\n  background-repeat: no-repeat;\\n  background-position: 50% 50%;\\n  background-size: 100%;\\n  content: \\"\\";\\n}\\n\\n.taro-video-control-button.taro-video-control-button-play::after,\\n.taro-video-cover-play-button {\\n  background-image: url(\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAeCAYAAAAy2w7YAAAAAXNSR0IArs4c6QAAAWhJREFUSA1j+P///0cgBoHjQGzCQCsAtgJB/AMy5wCxGNXtQ9iBwvoA5BUCMQvVLEQxHpNzDSjkRhXLMM3GKrIeKKpEkYVYjcUu+AMo3ALE3GRZiN1MvKKPgbIRJFuG10j8koeA0gZEW4jfLIKyf4EqpgOxMEELCRpFnIJ3QGU5QMyM00LizCFa1SWgSkeslhFtBGkKVwGVy6FYSJp+klR/A6quB2JOkIWMIK0oNlOf8xBoZDE9LAI7nYn6HsBq4l96WHQEaLUpAyiOaASeAM2NgvuPBpaACt82IEYtfKls0UagecpwXyAzqGTRdaA57sjmYrAptAjUsCkGYlYMg9EFyLQI1IiZB8Ti6Obh5JNh0QmgHlOcBuKSIMGi50C18UDMiMssvOJEWPQLqKYbiHnxGkRIkoBF24DyaoTMIEoeh0W3geI+RBlArCI0iz4D+RVAzEasfqLVAQ19AcSg5LoYiKWI1kiiQgCMBLnEEcfDSgAAAABJRU5ErkJggg==\\");\\n}\\n\\n.taro-video-control-button.taro-video-control-button-pause::after {\\n  background-image: url(\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAgCAYAAAAffCjxAAAAAXNSR0IArs4c6QAAAFlJREFUSA3tksEKACAIQ7X//5zq98wOgQayum8QaGweHhMzG/6OujzKAymn+0LMqivu1XznWmX8/echTIyMyAgTwA72iIwwAexgj8gIE8CO3aMRbDPMaEy5BRGaKcZv8YxRAAAAAElFTkSuQmCC\\");\\n}\\n\\n.taro-video-current-time,\\n.taro-video-duration {\\n  margin-top: 15px;\\n  margin-bottom: 14.5px;\\n  height: 14.5px;\\n  line-height: 14.5px;\\n  font-size: 12px;\\n  color: #cbcbcb;\\n}\\n\\n.taro-video-progress-container {\\n  position: relative;\\n  flex-grow: 2;\\n  -webkit-box-flex: 2;\\n}\\n\\n.taro-video-progress {\\n  position: relative;\\n  margin: 21px 12px;\\n  height: 2px;\\n  background-color: hsl(0deg 0% 100% / 40%);\\n}\\n\\n.taro-video-progress-buffered {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n  width: 0;\\n  height: 100%;\\n  background-color: hsl(0deg 0% 100% / 80%);\\n  transition: width 0.1s;\\n}\\n\\n.taro-video-ball {\\n  position: absolute;\\n  left: 0;\\n  top: -21px;\\n  box-sizing: content-box;\\n  margin-left: -22px;\\n  padding: 14px;\\n  width: 16px;\\n  height: 16px;\\n}\\n\\n.taro-video-inner {\\n  border-radius: 50%;\\n  width: 100%;\\n  height: 100%;\\n  background-color: #fff;\\n}\\n\\n.taro-video-danmu-button {\\n  margin: 0 8.5px;\\n  padding: 2px 10px;\\n  border: 1px solid #fff;\\n  border-radius: 5px;\\n  line-height: 1;\\n  font-size: 13px;\\n  color: #fff;\\n  white-space: nowrap;\\n}\\n\\n.taro-video-danmu-button.taro-video-danmu-button-active {\\n  border-color: #48c23d;\\n  color: #48c23d;\\n}\\n\\n.taro-video-fullscreen,\\n.taro-video-mute {\\n  box-sizing: content-box;\\n  padding: 8.5px;\\n  width: 17px;\\n  height: 17px;\\n  background-repeat: no-repeat;\\n  background-position: 50% 50%;\\n  background-size: 50%;\\n}\\n\\n.taro-video-fullscreen {\\n  background-image: url(\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAhUlEQVRYR+2WSwrAMAhEnZO3PfmULLooGEFTiIXJ2s/kRY2wzQeb85sE9CRA8jSzY1YfAFzhJBnU1AVgxH2dSiArCnD9QgGzRNnOech48SRABHoSyFb5in3PSbhyo6yvCPQkEM3u7BsPe/0FIvBfAh/vhKmVbO9SWun1qk/PSVi9TcVPBG6R1YIhgWwNpQAAAABJRU5ErkJggg==\\");\\n}\\n\\n.taro-video-fullscreen.taro-video-type-fullscreen {\\n  background-image: url(\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABPUlEQVRYR+2Xu0pDURBF1/ZLxNcHKNiIlfhA7C0UBSEE8RNEBNFPUEQEEbGxFiSSSrCwEHsf5E/ccsSUuWfUhKQ40947+y42Z8+ZK/pcinzf9hhwD1xJ2q/qsb0JHAOzkl5y+lGAGnCWICQtZgAS6DxQk3TeLYA6cAo0JSXxjmW7CcwBdUkJurKiDhSA4kBvHbA9CqwBQx2O7BSw8ssU3ALPFRF4knT3nQLbr8B4LjLBOdAAFgJaLUkjbYC9n+zm+i4kXWbmwCqwnRMCHiXthuZAQOzPrxSA4kBxYDAcsH0EzATCfCLpJjOINoCtgFZabg7bk7AFDAeaGpKWgitZTu5N0kQbYBmYrujo9mX0CVxL+gidAdu9vY5zXhWA4sAgOND3X7NJ4AHYCaxkB8B62gslvecSFpoDOZH/PP8Cnt7hIaM5xCEAAAAASUVORK5CYII=\\");\\n}\\n\\n.taro-video-mute {\\n  background-image: url(\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAGAGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTktMDQtMTFUMTA6MTg6MjArMDg6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE5LTA0LTExVDEwOjIyOjIyKzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE5LTA0LTExVDEwOjIyOjIyKzA4OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjk3YmE4Yjg0LTFhNTYtNGM1MS04NDVkLTNiZmYyMGI0ZDc0ZiIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjg1NGQ3MjlkLWUwNjctZjU0OC1hMTlhLTBlZjQ4OGRkYjJiOSIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjA1ODY3ZDFlLWQ3NGEtNDgyNC04MDU3LTYzYmRmMTdjODk5ZSI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MDU4NjdkMWUtZDc0YS00ODI0LTgwNTctNjNiZGYxN2M4OTllIiBzdEV2dDp3aGVuPSIyMDE5LTA0LTExVDEwOjE4OjIwKzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OTdiYThiODQtMWE1Ni00YzUxLTg0NWQtM2JmZjIwYjRkNzRmIiBzdEV2dDp3aGVuPSIyMDE5LTA0LTExVDEwOjIyOjIyKzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz459+FoAAABqElEQVRYhc2XPWsVQRSGnxPjF4oGRfxoRQKGWCU2Ft7CykrQWosEyf/If0hhIPgHDEmbNJZqCFxiQEgTUGxsBUVEHgvnyrjZZJO92V1fGIaZnTPvszPszNlQ6VIjnbr/DwCoDLMNak/dUVfUK0f2rQugnlcX/FevWgFQH6gf3autRgHUC+piiXHzAOmtPx9gXgug8itQx9SXwDpw47AGKXZWvXvQmNFCwE3gCXA2dY0Az4GrRzHONA9cU/vAbERsllEOyh31e8USV2mrMPdG9uyn+rDom2/BHHCm5puWKiKmgdtAnz+rvaxO5mNygEvHaZ5BfADuARvAaWBpP4DGFBHfgBngFzClTrUKkCDeA+9S837rAEnbqb7VFcCpVJ/oCmCw959aB1AfAROpudYqgDoOLKRmPyLelAF8bcD4pPoMeAtcB34AT4uDBqXXwFG8XXUU/72MIuK1OgE8Bs6l7mEvo8up7lN1Ge0n9aK6VHMFZvJTr9S3CiALaCQhqZOSvegMIAvu2UVSWpigLC1fbQ0gm6in7qpfLCQbhwGIYcyPQ53/G3YO8BtUtd35bvKcVwAAAABJRU5ErkJggg==\\");\\n}\\n\\n.taro-video-mute.taro-video-type-mute {\\n  background-image: url(\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAgCAYAAAB3j6rJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGAGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTktMDQtMTFUMTA6MTk6MDMrMDg6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE5LTA0LTExVDEwOjIyOjMzKzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE5LTA0LTExVDEwOjIyOjMzKzA4OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjAzYjJmNjE2LTZmZTUtNDJjNC1iNTgwLTczNzZjZjI2NzdmNSIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjYzZjQ2NTYzLWE0ZjktOGQ0Mi1hM2FhLTY3ODJhNDBhYWNjMSIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjIyYWNjMWFlLTg4ZmMtNDBlZi1iMWM1LTNmODgwY2QzYWI2MiI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MjJhY2MxYWUtODhmYy00MGVmLWIxYzUtM2Y4ODBjZDNhYjYyIiBzdEV2dDp3aGVuPSIyMDE5LTA0LTExVDEwOjE5OjAzKzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MDNiMmY2MTYtNmZlNS00MmM0LWI1ODAtNzM3NmNmMjY3N2Y1IiBzdEV2dDp3aGVuPSIyMDE5LTA0LTExVDEwOjIyOjMzKzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5PmxYVAAACLklEQVRYhc2XP2sVQRRHz40hKoqaQgVBCy1EozFlGiVFxMLGh4piYWEh+hkEP4YKAVFEEFTyughaCH6DqIVpAhYWEgIxoJE8cywyi5tNHu/tJmvyg2WZO3dmzt47/zZUtoJ6Nhsg09YDiYhKDzACTAFNYH9lEpUq80TdrT5wpV5n/ZV9KoGoo+pXV2uyKkipOaLuUceAt8DhUvQd1FsCYhR4ChzaSIBMHSOi7lOfsByFWiCgEBH1GHAF2JlMPcBt4GC3HUYEaj9wF3gVEVPtfNVTwAXgWX7CDKq/1piAZTSZBmim8qJ6sQ3EgDqb/L7kU3MH2NHtl3dQX3r3Ak21UYAYAj4A/cl0JB+RF+uMRj4iQ+p8zt7KYFLdXKHuRi0gacBhV6a6pd5bA6KRNagFJPU9qv5u47toLmW1HnoR8Q5oAK1CVQu4FBHj/wUkaXsb+4pzpVaQFPqXrN7Be4Fx9VztIOr1BLEtmX4A94E/qdwHTKjDWYM6lu81dSlnn3V570BtuLxaMs2rZ/IgYxsBovaoPwsQA4VoFWEm8ql5DiysNyURsQTMpOIMcDYiPhd8xoGr/FtNC2G6FKXD6ihwGdiVHMoeeh8jYlA9ANwE3kTEp3bO6vE03qOONzR1r/q4RGrquaFFxFxE3ALOA9+6jExpdb180y55AhirhaRTatq0GXEzL8+ZIuI9cBJ4WKiartJf9nWV/mty7UfUafW7erpqRGI9EBuprffvu9n6C1KOmsqwI5A1AAAAAElFTkSuQmCC\\");\\n}\\n\\n.taro-video-danmu {\\n  overflow: visible;\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n  bottom: 0;\\n  margin-top: 14px;\\n  margin-bottom: 44px;\\n  width: 100%;\\n  line-height: 14px;\\n  font-size: 14px;\\n}\\n\\n.taro-video-danmu-item {\\n  position: absolute;\\n  left: 100%;\\n  line-height: 1;\\n  color: #fff;\\n  white-space: nowrap;\\n  transform: translateX(0);\\n  transition-property: left, transform;\\n  transition-duration: 3s;\\n  transition-timing-function: linear;\\n}\\n\\n.taro-video-toast {\\n  display: block;\\n  visibility: hidden;\\n  position: absolute;\\n  left: 50%;\\n  top: 50%;\\n  border-radius: 5px;\\n  background-color: hsl(0deg 0% 100% / 80%);\\n  pointer-events: none;\\n  color: #000;\\n  transform: translate(-50%, -50%);\\n}\\n\\n.taro-video-toast.taro-video-toast-volume {\\n  display: block;\\n  width: 100px;\\n  height: 100px;\\n}\\n\\n.taro-video-toast-volume .taro-video-toast-title {\\n  display: block;\\n  margin-top: 10px;\\n  width: 100%;\\n  line-height: 16px;\\n  text-align: center;\\n  font-size: 12px;\\n}\\n\\n.taro-video-toast-volume .taro-video-toast-icon {\\n  display: block;\\n  margin-left: 25%;\\n  width: 50%;\\n  height: 50%;\\n  background-image: url(\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAFhklEQVR4Xu2aeaxfQxTHP1VBES0NIQitWtpaaxeCUkQtaYVa0tiClAq1ExIiQTVppaWxt8RWSa2tWkJQRGgtQaSIpUKEpG0ssbbk28yV2+mZO/e9e3vvu/e98897mZnfzPl+75mZs0wvurn06ub46SGgxwLqZaA3sB/wO/A+8G/V6tS5BU4BJgJbO9DvAMOB36okoQ4CNgAeBEYbQK8Bbm4zAdsBc4EdAyA/APZoKwHHAA8DG2UA/AnYrG0ErAVcD1yXA9gfQJ8c40obsqbPgH7AY8CROTVuFQFD3X7fJid4DWsNAWOAGZ0w58YTsDZwKzChA189PbTRBGwKzAYO6iT4srbAMHfTfAksjulS1iG4JzAH2Dy2YKS/qAVcCdzi1vgZOBZ4PWvNGAG6wgYCW0IwctzNmf06BcEXtYABwOeA4otEfgEOdnGGqV6IAAUopwM6zDYuAVjeKYpYwCjgCWOhH513+b2lhE+Avrj89NPyalzyuCIE6EN9BfQ1dHoPOAD40+9LE6D/5aoqSqtLsgiQC60DTiHzfGCFoaSsQAexZdlTgEuyCDgLuK8u5G7dEAHyKN8CBrtxLwDHAX8Z+l4N3GS0L3db4aN0X5opmc+2XZQAfb2LPd2eciG1lUSRJZ9qYHkZONwiYAjwSc3gs24BXWWWfzEVuMjQez13HljX8v7A28lvEgsInaBVcxLaAvr6sgJLtBWeNTrOB+4w2p8DRvoEnAPcXTVaY70QAbrbXwIONX7zBSAL/tvrk1+iviTllnRry2irr/QSEws4D7izCxMg1XQLLAQGGXpeCkw22kOWI49RMUujCJC+uwAfGtfcImAng4AtAMsBeg04pIkESOfbgQsMsNoGnxrtSrfv7rXrSlwXWN6kLZBgEBiB8iWUUZZPIN/AF1nMoiYSICDfAlt5iB4CxhpAzwXuMtqPBuY1lYB5wFEeqFeAwwyguvIUqvuiQO/xphJwP3Cmhyh0EKrOoGDIF7n+M5pKwEwXrqdBCaQSM77Ig7SSIicDs5pKwIvACA+pzFwZIF9OlKm36QyQV7jEqDDJk5VD58uFgGIGX1Se+6yJFqAKsqI6X84GdDb4Mh0Y5zUqjFYFakUTCXja5QLSmBQHbAL8ahAgT1AeYVreSKLLphGwF/CuAfLJQLldGSTFD75c5d4mNCoWyAqG9gYWGED1AOMKo12ZbiWA/idA++deY2DVTZ0Jh5UJPsFQtD/wDaAHGWl5EzgwaUi2gK4UXS11S0cTIjrMFBtYQdAk4DID0BnAAz4B6wNLgTKKG0VIDBHwqitwpOcW+OOB540FdeipNKbUWFrUtn06o5xOij4KyDuqU0IE3Obl/rLA63pTzm9XA8jKACjdniZAaSKFmUpB1yUhAlTsUEpMh913wEkuTe7rKTzPAHqO44vpKPkFhH3cWWBVV6ogJVYZUgz/tXtIYelzI3Ct0fExIGx6j7iKWBUUveyYBehv1RIjIEsfqziq8Xp4pSBJOYTVJFQcVY3wCFeKUjVGyYfQWB00+5bEVBECrNS+qsOKBpVHNCVWHs+LS7H5PV5pOu9v0+OKEOAXR39w1e1C7wM6AkJ1eLmkRcrpRQiQrqobXO5S3vL3/4kBKMsCknV0k+iasVLUMV3UX5SAPGtED8EOT+L9YENnCasUIXNO2goChFWHqAIRyxXN4qI1BCQg9dJESYq8LnbrCBAR8t50Lig6i0krCRBoVWhVlt45wkBrCRBuRZyPuAguxIPe9lXqhpd9DcZMXOvdkPF0Xu/8dohNUmZ/1QQkuitXr+d4fryuFx3jywQYm6suAqSX8vLTXKJDt4QqO6rtLYspXWZ/nQQkOJTAUJZGIav19q9MvKvN1RUIWKMAY5P3EBBjqO393d4C/gMVHwRQlpx21QAAAABJRU5ErkJggg==\\");\\n  background-repeat: no-repeat;\\n  background-position: 50% 50%;\\n  background-size: 50%;\\n  fill: #000;\\n}\\n\\n.taro-video-toast-volume .taro-video-toast-value {\\n  margin-left: 10px;\\n  margin-top: 5px;\\n  width: 80px;\\n  height: 5px;\\n}\\n\\n.taro-video-toast-volume .taro-video-toast-value > .taro-video-toast-value-content {\\n  overflow: hidden;\\n}\\n\\n.taro-video-toast-volume-grids {\\n  width: 80px;\\n  height: 5px;\\n}\\n\\n.taro-video-toast-volume-grids-item {\\n  float: left;\\n  width: 7.1px;\\n  height: 5px;\\n  background-color: #000;\\n}\\n\\n.taro-video-toast-volume-grids-item:not(:first-child) {\\n  margin-left: 1px;\\n}\\n\\n.taro-video-toast.taro-video-toast-progress {\\n  padding: 6px;\\n  background-color: rgb(0 0 0 / 80%);\\n  line-height: 18px;\\n  font-size: 14px;\\n  color: #fff;\\n}\\n","import { Component, h, ComponentInterface, Prop, State, Event, EventEmitter, Host, Watch, Listen, Element, Method } from \'@stencil/core\'\\nimport classNames from \'classnames\'\\n\\nimport { throttle } from \'../../utils\'\\nimport {\\n  formatTime,\\n  calcDist,\\n  normalizeNumber,\\n  screenFn,\\n  isHls,\\n  scene\\n} from \'./utils\'\\n\\nimport type HLS from \'hls.js\'\\n\\n@Component({\\n  tag: \'taro-video-core\',\\n  styleUrl: \'./style/index.scss\'\\n})\\nexport class Video implements ComponentInterface {\\n  private videoRef: HTMLVideoElement\\n  private controlsRef: HTMLTaroVideoControlElement\\n  private danmuRef: HTMLTaroVideoDanmuElement\\n  private toastProgressRef: HTMLDivElement\\n  private toastProgressTitleRef: HTMLDivElement\\n  private toastVolumeRef: HTMLDivElement\\n  private toastVolumeBarRef: HTMLDivElement\\n  private currentTime = 0\\n  private lastClickedTime: number\\n  private lastTouchScreenX: number | undefined\\n  private lastTouchScreenY: number | undefined\\n  private isDraggingProgress = false\\n  private lastVolume: number\\n  private lastPercentage: number\\n  private nextPercentage: number\\n  private gestureType = \'none\'\\n  private HLS: typeof HLS\\n  private hls: HLS\\n\\n  @Element() el: HTMLTaroVideoCoreElement\\n\\n  /**\\n   * 要播放视频的资源地址\\n   */\\n  @Prop() src: string\\n\\n  /**\\n   * 指定视频时长\\n   */\\n  @Prop() duration: number\\n\\n  /**\\n   * 是否显示默认播放控件（播放/暂停按钮、播放进度、时间）\\n   */\\n  @Prop() controls = true\\n\\n  /**\\n   * 是否自动播放\\n   */\\n  @Prop() autoplay = false\\n\\n  /**\\n   * 是否循环播放\\n   */\\n  @Prop() loop = false\\n\\n  /**\\n   * 是否静音播放\\n   */\\n  @Prop() muted = false\\n\\n  /**\\n   * 指定视频初始播放位置\\n   */\\n  @Prop() initialTime = 0\\n\\n  /**\\n   * 视频封面的图片网络资源地址或云文件ID（2.3.0）。若 controls 属性值为 false 则设置 poster 无效\\n   */\\n  @Prop() poster: string\\n\\n  /**\\n   * 当视频大小与 video 容器大小不一致时，视频的表现形式\\n   */\\n  @Prop() objectFit: \'contain\' | \'fill\' | \'cover\' = \'contain\'\\n\\n  /**\\n   * 若不设置，宽度大于 240 时才会显示\\n   */\\n  @Prop() showProgress = true\\n\\n  /**\\n   * 是否显示全屏按钮\\n   */\\n  @Prop() showFullscreenBtn = true\\n\\n  /**\\n   * 是否显示视频底部控制栏的播放按钮\\n   */\\n  @Prop() showPlayBtn = true\\n\\n  /**\\n   * 是否显示视频中间的播放按钮\\n   */\\n  @Prop() showCenterPlayBtn = true\\n\\n  /**\\n   * 是否显示静音按钮\\n   */\\n  @Prop() showMuteBtn = false\\n\\n  /**\\n   * 弹幕列表\\n   */\\n  @Prop() danmuList: []\\n\\n  /**\\n   * 是否显示弹幕按钮\\n   */\\n  @Prop() danmuBtn = false\\n\\n  /**\\n   * 是否展示弹幕\\n   */\\n  @Prop() enableDanmu = false\\n\\n  /**\\n   * 是否开启播放手势，即双击切换播放/暂停\\n   */\\n  @Prop() enablePlayGesture = false\\n\\n  /**\\n   * 是否开启控制进度的手势\\n   */\\n  @Prop() enableProgressGesture = true\\n\\n  /**\\n   * 在非全屏模式下，是否开启亮度与音量调节手势\\n   */\\n  @Prop() vslideGesture = false\\n\\n  /**\\n   * 在全屏模式下，是否开启亮度与音量调节手势\\n   */\\n  @Prop() vslideGestureInFullscreen = true\\n\\n  @Prop() nativeProps = {}\\n\\n  @State() _duration: number\\n  @State() _enableDanmu = false\\n  @State() isPlaying = false\\n  @State() isFirst = true\\n  @State() isFullScreen = false\\n  @State() fullScreenTimestamp = new Date().getTime()\\n  @State() isMute = false\\n\\n  @Event({\\n    eventName: \'play\'\\n  }) onPlay: EventEmitter\\n\\n  @Event({\\n    eventName: \'pause\'\\n  }) onPause: EventEmitter\\n\\n  @Event({\\n    eventName: \'ended\'\\n  }) onEnded: EventEmitter\\n\\n  @Event({\\n    eventName: \'timeupdate\'\\n  }) onTimeUpdate: EventEmitter\\n\\n  @Event({\\n    eventName: \'error\'\\n  }) onError: EventEmitter\\n\\n  @Event({\\n    eventName: \'fullscreenchange\'\\n  }) onFullScreenChange: EventEmitter\\n\\n  @Event({\\n    eventName: \'progress\'\\n  }) onProgress: EventEmitter\\n\\n  @Event({\\n    eventName: \'loadedmetadata\'\\n  }) onLoadedMetaData: EventEmitter\\n\\n  componentWillLoad () {\\n    this._enableDanmu = this.enableDanmu\\n  }\\n\\n  componentDidLoad () {\\n    this.init()\\n    if (this.initialTime) {\\n      this.videoRef.currentTime = this.initialTime\\n    }\\n    // 目前只支持 danmuList 初始化弹幕列表，还未支持更新弹幕列表\\n    this.danmuRef.sendDanmu?.(this.danmuList)\\n\\n    if (document.addEventListener) {\\n      document.addEventListener(screenFn.fullscreenchange, this.handleFullScreenChange)\\n    }\\n    if (this.videoRef && scene === \'iOS\') {\\n      // NOTE: iOS 场景下 fullscreenchange 并不会在退出全屏状态下触发，仅 webkitpresentationmodechanged 与 webkitendfullscreen 可替代\\n      this.videoRef.addEventListener(\'webkitendfullscreen\', this.handleFullScreenChange)\\n    }\\n  }\\n\\n  componentDidRender () {\\n  }\\n\\n  disconnectedCallback () {\\n    if (document.removeEventListener) {\\n      document.removeEventListener(screenFn.fullscreenchange, this.handleFullScreenChange)\\n    }\\n    if (this.videoRef && scene === \'iOS\') {\\n      this.videoRef.removeEventListener(\'webkitendfullscreen\', this.handleFullScreenChange)\\n    }\\n  }\\n\\n  @Watch(\'enableDanmu\')\\n  watchEnableDanmu (newVal) {\\n    this._enableDanmu = newVal\\n  }\\n\\n  @Watch(\'src\')\\n  watchSrc () {\\n    this.init()\\n  }\\n\\n  analyzeGesture = (e: TouchEvent) => {\\n    const obj: {\\n      type: string\\n      dataX?: number\\n      dataY?: number\\n    } = {\\n      type: \'none\'\\n    }\\n    const nowX = e.touches[0].screenX\\n    const nowY = e.touches[0].screenY\\n    const distX = nowX - (this.lastTouchScreenX as number)\\n    const distY = nowY - (this.lastTouchScreenY as number)\\n    const enableVslideGesture = this.isFullScreen ? this.vslideGestureInFullscreen : this.vslideGesture\\n\\n    if (this.gestureType === \'none\') {\\n      // 两点间距离\\n      const dist = calcDist(distX, distY)\\n\\n      // 没有移动\\n      if (dist < 10) return obj\\n\\n      if (Math.abs(distY) >= Math.abs(distX)) {\\n        // 垂直方向移动：调整音量\\n        if (enableVslideGesture) {\\n          this.gestureType = \'adjustVolume\'\\n          this.lastVolume = this.videoRef.volume\\n        } else {\\n          return obj\\n        }\\n      } else if (Math.abs(distY) < Math.abs(distX)) {\\n        // 水平方向移动：调整进度\\n        if (this.enableProgressGesture) {\\n          this.gestureType = \'adjustProgress\'\\n          this.lastPercentage = this.currentTime / (this.duration ?? this._duration)\\n        } else {\\n          return obj\\n        }\\n      }\\n    }\\n    obj.type = this.gestureType\\n    obj.dataX = normalizeNumber(distX / 200)\\n    obj.dataY = normalizeNumber(distY / 200)\\n    return obj\\n  }\\n\\n  @Listen(\'touchmove\', {\\n    target: \'document\'\\n  })\\n  async onDocumentTouchMove (e: TouchEvent) {\\n    if (this.lastTouchScreenX === undefined || this.lastTouchScreenY === undefined) return\\n    if (await this.controlsRef.getIsDraggingProgressBall()) return\\n\\n    const gestureObj = this.analyzeGesture(e)\\n    if (gestureObj.type === \'adjustVolume\') {\\n      this.toastVolumeRef.style.visibility = \'visible\'\\n      const nextVolume = Math.max(Math.min(this.lastVolume - gestureObj.dataY!, 1), 0)\\n      this.videoRef.volume = nextVolume\\n      this.toastVolumeBarRef.style.width = `${nextVolume * 100}%`\\n    } else if (gestureObj.type === \'adjustProgress\') {\\n      this.isDraggingProgress = true\\n      this.nextPercentage = Math.max(Math.min(this.lastPercentage + (gestureObj.dataX || 0), 1), 0)\\n      if (this.controls && this.showProgress) {\\n        this.controlsRef.setProgressBall(this.nextPercentage)\\n        this.controlsRef.toggleVisibility(true)\\n      }\\n      const duration = this.duration || this._duration\\n      this.toastProgressTitleRef.innerHTML = `${formatTime(this.nextPercentage * duration)} / ${formatTime(duration)}`\\n      this.toastProgressRef.style.visibility = \'visible\'\\n    }\\n  }\\n\\n  @Listen(\'touchend\', {\\n    target: \'document\'\\n  })\\n  @Listen(\'touchcancel\', {\\n    target: \'document\'\\n  })\\n  onDocumentTouchEnd () {\\n    if (this.gestureType === \'adjustVolume\') {\\n      this.toastVolumeRef.style.visibility = \'hidden\'\\n    } else if (this.gestureType === \'adjustProgress\') {\\n      this.toastProgressRef.style.visibility = \'hidden\'\\n    }\\n\\n    if (this.isDraggingProgress) {\\n      this.isDraggingProgress = false\\n      this.seek(this.nextPercentage * (this.duration ?? this._duration))\\n    }\\n\\n    this.gestureType = \'none\'\\n    this.lastTouchScreenX = undefined\\n    this.lastTouchScreenY = undefined\\n  }\\n\\n  loadNativePlayer = () => {\\n    if (this.videoRef) {\\n      this.videoRef.src = this.src\\n      this.videoRef.load?.()\\n    }\\n  }\\n\\n  init = () => {\\n    const { src, videoRef } = this\\n\\n    if (isHls(src)) {\\n      import(\'hls.js\').then(e => {\\n        const Hls = e.default\\n        this.HLS = Hls\\n        if (Hls.isSupported()) {\\n          if (this.hls) {\\n            this.hls.destroy()\\n          }\\n          this.hls = new Hls()\\n          this.hls.loadSource(src)\\n          this.hls.attachMedia(videoRef)\\n          this.hls.on(Hls.Events.MANIFEST_PARSED, () => {\\n            this.autoplay && this.play()\\n          })\\n          this.hls.on(Hls.Events.ERROR, (_, data) => {\\n            this.handleError(data)\\n          })\\n        } else if (videoRef.canPlayType(\'application/vnd.apple.mpegurl\')) {\\n          this.loadNativePlayer()\\n        } else {\\n          console.error(\'该浏览器不支持 HLS 播放\')\\n        }\\n      })\\n    } else {\\n      this.loadNativePlayer()\\n    }\\n  }\\n\\n  handlePlay = () => {\\n    this.isPlaying = true\\n    this.isFirst = false\\n    this.controlsRef.toggleVisibility(true)\\n    this.onPlay.emit()\\n  }\\n\\n  handlePause = () => {\\n    this.isPlaying = false\\n    this.controlsRef.toggleVisibility(true)\\n    this.onPause.emit()\\n  }\\n\\n  handleEnded = () => {\\n    this.isFirst = true\\n    this.pause()\\n    this.controlsRef.toggleVisibility()\\n    this.onEnded.emit()\\n  }\\n\\n  handleTimeUpdate = throttle(async e => {\\n    this.currentTime = this.videoRef.currentTime\\n    const duration = this.duration || this._duration\\n\\n    const isControlDragging = await this.controlsRef.getIsDraggingProgressBall()\\n    if (this.controls && this.showProgress) {\\n      if (!isControlDragging && !this.isDraggingProgress) {\\n        this.controlsRef.setProgressBall(this.currentTime / duration)\\n        this.controlsRef.setCurrentTime(this.currentTime)\\n      }\\n    }\\n\\n    this.danmuRef.tick(this.currentTime)\\n\\n    this.onTimeUpdate.emit({\\n      duration: e.target?.duration,\\n      currentTime: e.target?.currentTime\\n    })\\n\\n    if (this.duration) {\\n      if (this.currentTime >= this.duration) {\\n        this.seek(0)\\n        this.handleEnded()\\n      }\\n    }\\n  }, 250)\\n\\n  handleError = e => {\\n    if (this.hls) {\\n      switch (e.type) {\\n        case this.HLS.ErrorTypes.NETWORK_ERROR:\\n          // try to recover network error\\n          this.onError.emit({ errMsg: e.response })\\n          this.hls.startLoad()\\n          break\\n        case this.HLS.ErrorTypes.MEDIA_ERROR:\\n          this.onError.emit({ errMsg: e.reason || \'媒体错误,请重试\' })\\n          this.hls.recoverMediaError()\\n          break\\n        default:\\n          break\\n      }\\n    } else {\\n      this.onError.emit({\\n        errMsg: e.target?.error?.message,\\n      })\\n    }\\n  }\\n\\n  handleDurationChange = () => {\\n    this._duration = this.videoRef.duration\\n  }\\n\\n  handleProgress = () => {\\n    this.onProgress.emit()\\n  }\\n\\n  handleLoadedMetaData = (e: Event) => {\\n    const target = e.target as HTMLVideoElement\\n    this.onLoadedMetaData.emit({\\n      width: target.videoWidth,\\n      height: target.videoHeight,\\n      duration: target.duration\\n    })\\n  }\\n\\n  @Method()\\n  async getHlsObject() {\\n    // Note: H5 端专属方法，获取 HLS 实例 fix #11894\\n    return this.hls\\n  }\\n\\n  /** 播放视频 */\\n  @Method()\\n  async play () {\\n    this._play()\\n  }\\n\\n  _play = () => this.videoRef.play()\\n\\n  /** 暂停视频 */\\n  @Method()\\n  async pause () {\\n    this._pause()\\n  }\\n\\n  _pause = () => this.videoRef.pause()\\n\\n  /** 停止视频 */\\n  @Method()\\n  async stop () {\\n    this._stop()\\n  }\\n\\n  _stop = () => {\\n    this.videoRef.pause()\\n    this._seek(0)\\n  }\\n\\n  /** 跳转到指定位置 */\\n  @Method()\\n  async seek (position: number) {\\n    this._seek(position)\\n  }\\n\\n  _seek = (position: number) => {\\n    this.videoRef.currentTime = position\\n  }\\n\\n  /** 进入全屏。若有自定义内容需在全屏时展示，需将内容节点放置到 video 节点内。 */\\n  @Method()\\n  async requestFullScreen () {\\n    this.toggleFullScreen(true)\\n  }\\n\\n  /** 退出全屏 */\\n  @Method()\\n  async exitFullScreen () {\\n    this.toggleFullScreen(false)\\n  }\\n\\n  onTouchStartContainer = (e: TouchEvent) => {\\n    this.lastTouchScreenX = e.touches[0].screenX\\n    this.lastTouchScreenY = e.touches[0].screenY\\n  }\\n\\n  onClickContainer = () => {\\n    if (this.enablePlayGesture) {\\n      const now = Date.now()\\n      if (now - this.lastClickedTime < 300) {\\n        // 双击\\n        this.isPlaying ? this.pause() : this.play()\\n      }\\n      this.lastClickedTime = now\\n    }\\n    this.controlsRef.toggleVisibility()\\n  }\\n\\n  onClickFullScreenBtn = (e: MouseEvent) => {\\n    e.stopPropagation()\\n    this.toggleFullScreen()\\n  }\\n\\n  handleFullScreenChange = e => {\\n    // 全屏后，\\"退出\\"走的是浏览器事件，在此同步状态\\n    const timestamp = new Date().getTime()\\n    if (!e.detail && this.isFullScreen && !document[screenFn.fullscreenElement] && timestamp - this.fullScreenTimestamp > 100) {\\n      this.toggleFullScreen(false)\\n    }\\n  }\\n\\n  toggleFullScreen = (isFullScreen = !this.isFullScreen) => {\\n    this.isFullScreen = isFullScreen // this.videoRef?.[\'webkitDisplayingFullscreen\']\\n    this.controlsRef.toggleVisibility(true)\\n    this.fullScreenTimestamp = new Date().getTime()\\n    this.onFullScreenChange.emit({\\n      fullScreen: this.isFullScreen,\\n      direction: \'vertical\'\\n    })\\n    if (this.isFullScreen && !document[screenFn.fullscreenElement]) {\\n      setTimeout(() => {\\n        this.videoRef[screenFn.requestFullscreen]({ navigationUI: \'auto\' })\\n      }, 0)\\n    }\\n  }\\n\\n  toggleMute = (e: MouseEvent) => {\\n    e.stopPropagation()\\n    this.videoRef.muted = !this.isMute\\n    this.controlsRef.toggleVisibility(true)\\n    this.isMute = !this.isMute\\n  }\\n\\n  toggleDanmu = (e: MouseEvent) => {\\n    e.stopPropagation()\\n    this.controlsRef.toggleVisibility(true)\\n    this._enableDanmu = !this._enableDanmu\\n  }\\n\\n  render () {\\n    const {\\n      controls,\\n      autoplay,\\n      loop,\\n      muted,\\n      poster,\\n      objectFit,\\n      isFirst,\\n      isMute,\\n      isFullScreen,\\n      showCenterPlayBtn,\\n      isPlaying,\\n      _enableDanmu,\\n      showMuteBtn,\\n      danmuBtn,\\n      showFullscreenBtn,\\n      nativeProps\\n    } = this\\n    const duration = this.duration || this._duration\\n    const durationTime = formatTime(duration)\\n\\n    return (\\n      <Host\\n        class={classNames(\'taro-video-container\', {\\n          \'taro-video-type-fullscreen\': isFullScreen\\n        })}\\n        onTouchStart={this.onTouchStartContainer}\\n        onClick={this.onClickContainer}\\n      >\\n        <video\\n          class=\'taro-video-video\'\\n          style={{\\n            \'object-fit\': objectFit\\n          }}\\n          ref={dom => {\\n            if (dom) {\\n              this.videoRef = dom as HTMLVideoElement\\n            }\\n          }}\\n          autoplay={autoplay}\\n          loop={loop}\\n          muted={muted}\\n          poster={controls ? poster : undefined}\\n          playsinline\\n          webkit-playsinline\\n          onPlay={this.handlePlay}\\n          onPause={this.handlePause}\\n          onEnded={this.handleEnded}\\n          onTimeUpdate={this.handleTimeUpdate}\\n          onError={this.handleError}\\n          onDurationChange={this.handleDurationChange}\\n          onProgress={this.handleProgress}\\n          onLoadedMetaData={this.handleLoadedMetaData}\\n          {...nativeProps}\\n        >\\n          暂时不支持播放该视频\\n        </video>\\n\\n        <taro-video-danmu\\n          ref={dom => {\\n            if (dom) {\\n              this.danmuRef = dom as HTMLTaroVideoDanmuElement\\n            }\\n          }}\\n          enable={_enableDanmu}\\n        />\\n\\n        {isFirst && showCenterPlayBtn && !isPlaying && (\\n          <div class=\'taro-video-cover\'>\\n            <div class=\'taro-video-cover-play-button\' onClick={() => this.play()} />\\n            <p class=\'taro-video-cover-duration\'>{durationTime}</p>\\n          </div>\\n        )}\\n\\n        <taro-video-control\\n          ref={dom => {\\n            if (dom) {\\n              this.controlsRef = dom\\n            }\\n          }}\\n          controls={controls}\\n          currentTime={this.currentTime}\\n          duration={duration}\\n          isPlaying={this.isPlaying}\\n          pauseFunc={this._pause}\\n          playFunc={this._play}\\n          seekFunc={this._seek}\\n          showPlayBtn={this.showPlayBtn}\\n          showProgress={this.showProgress}\\n        >\\n          {showMuteBtn && (\\n            <div\\n              class={classNames(\'taro-video-mute\', {\\n                \'taro-video-type-mute\': isMute\\n              })}\\n              onClick={this.toggleMute}\\n            />\\n          )}\\n          {danmuBtn && (\\n            <div\\n              class={classNames(\'taro-video-danmu-button\', {\\n                \'taro-video-danmu-button-active\': _enableDanmu\\n              })}\\n              onClick={this.toggleDanmu}>\\n              弹幕\\n            </div>\\n          )}\\n          {showFullscreenBtn && (\\n            <div\\n              class={classNames(\'taro-video-fullscreen\', {\\n                \'taro-video-type-fullscreen\': isFullScreen\\n              })}\\n              onClick={this.onClickFullScreenBtn}\\n            />\\n          )}\\n        </taro-video-control>\\n\\n        <div class=\'taro-video-toast taro-video-toast-volume\' ref={dom => {\\n          if (dom) {\\n            this.toastVolumeRef = dom\\n          }\\n        }}>\\n          <div class=\'taro-video-toast-title\'>音量</div>\\n          <div class=\'taro-video-toast-icon\' />\\n          <div class=\'taro-video-toast-value\'>\\n            <div class=\'taro-video-toast-value-content\' ref={dom => {\\n              if (dom) {\\n                this.toastVolumeBarRef = dom\\n              }\\n            }}>\\n              <div class=\'taro-video-toast-volume-grids\'>\\n                {Array(10).fill(1).map(() => (\\n                  <div class=\'taro-video-toast-volume-grids-item\' />\\n                ))}\\n              </div>\\n            </div>\\n          </div>\\n        </div>\\n\\n        <div class=\'taro-video-toast taro-video-toast-progress\' ref={dom => {\\n          if (dom) {\\n            this.toastProgressRef = dom\\n          }\\n        }}>\\n          <div class=\'taro-video-toast-title\' ref={dom => {\\n            if (dom) {\\n              this.toastProgressTitleRef = dom\\n            }\\n          }} />\\n        </div>\\n      </Host>\\n    )\\n  }\\n}\\n","import { Component, h, ComponentInterface, Prop, State, Host, Method } from \'@stencil/core\'\\n\\nexport interface Danmu {\\n  text: string\\n  color: string\\n  time: number,\\n  key: number,\\n  bottom: string\\n}\\n\\n@Component({\\n  tag: \'taro-video-danmu\'\\n})\\nexport class VideoDanmu implements ComponentInterface {\\n  private list: Danmu[] = []\\n  private danmuElList: HTMLParagraphElement[] = []\\n  private currentTime = 0\\n\\n  @Prop() enable = false\\n\\n  @State() danmuList: Danmu[] = []\\n\\n  ensureProperties (danmu: Partial<Danmu>): Danmu {\\n    const clonedDanmu = { ...danmu } as Danmu\\n    if (!(\'time\' in danmu)) {\\n      clonedDanmu.time = this.currentTime\\n    }\\n    clonedDanmu.key = Math.random()\\n    clonedDanmu.bottom = `${Math.random() * 90 + 5}%`\\n    return clonedDanmu\\n  }\\n\\n  @Method()\\n  async sendDanmu (danmuList: Partial<Danmu> | Partial<Danmu>[] = []) {\\n    if (Array.isArray(danmuList)) {\\n      this.list = [\\n        ...this.list,\\n        ...danmuList.map(danmu => this.ensureProperties(danmu))\\n      ]\\n    } else {\\n      const danmu = danmuList\\n      this.list = [\\n        ...this.list,\\n        { ...this.ensureProperties(danmu) }\\n      ]\\n    }\\n  }\\n\\n  @Method()\\n  async tick (currentTime: number) {\\n    this.currentTime = currentTime\\n\\n    if (!this.enable) return\\n\\n    const danmuList = this.list\\n\\n    /**\\n     * @todo 这个判断对拖拽进度的处理不严谨\\n     */\\n    const newDanmuList = danmuList.filter(({ time }) => {\\n      return currentTime - time < 4 && currentTime > time\\n    })\\n    let shouldUpdate = false\\n    const oldDanmuList = this.danmuList\\n\\n    if (newDanmuList.length !== oldDanmuList.length) {\\n      shouldUpdate = true\\n    } else {\\n      shouldUpdate = newDanmuList.some(({ key }) => {\\n        return oldDanmuList.every((danmu) => {\\n          return key !== danmu.key\\n        })\\n      })\\n    }\\n    if (shouldUpdate) {\\n      this.danmuList = newDanmuList\\n    }\\n  }\\n\\n  componentDidUpdate () {\\n    requestAnimationFrame(() => {\\n      setTimeout(() => {\\n        const danmuElList = this.danmuElList.splice(0)\\n        danmuElList.forEach(danmu => {\\n          danmu.style.left = \'0\'\\n          danmu.style.webkitTransform = \'translateX(-100%)\'\\n          danmu.style.transform = \'translateX(-100%)\'\\n        })\\n      })\\n    })\\n  }\\n\\n  render () {\\n    if (!this.enable) return \'\'\\n\\n    return (\\n      <Host class=\'taro-video-danmu\'>\\n        {this.danmuList.map(({ text, color, bottom, key }) => (\\n          <p\\n            class=\'taro-video-danmu-item\'\\n            key={key}\\n            style={{\\n              color,\\n              bottom\\n            }}\\n            ref={ref => {\\n              if (ref) {\\n                this.danmuElList.push(ref)\\n              }\\n            }}\\n          >\\n            {text}\\n          </p>\\n        ))}\\n      </Host>\\n    )\\n  }\\n}\\n"],"mappings":"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"}')}}]);